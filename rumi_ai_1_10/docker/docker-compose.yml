version: 3.8
services:
  pack-default:
    build:
      context: ../ecosystem/default
      dockerfile: ../docker/packs/default/Dockerfile
    image: "rumi-pack-default:latest"
    container_name: rumi-pack-default
    volumes:
      - "./sandbox/default:/sandbox:rw"
    networks:
      - net-default
    mem_limit: 128m
    cpus: 0.5
    read_only: true
    tmpfs:
      - "/tmp:size=64m"
    security_opt:
      - "no-new-privileges:true"
    labels:
      - rumi.pack_id=default
      - rumi.managed=true
    restart: unless-stopped
    logging:
      driver: json-file
      options:
        max-size: 10m
        max-file: 3
networks:
  net-default:
    driver: bridge
    internal: true
    labels:
      - rumi.pack_id=default
      - rumi.managed=true